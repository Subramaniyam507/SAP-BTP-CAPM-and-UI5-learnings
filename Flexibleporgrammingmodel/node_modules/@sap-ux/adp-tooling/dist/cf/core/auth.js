"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isExternalLoginEnabled = isExternalLoginEnabled;
exports.isLoggedInCf = isLoggedInCf;
const CFLocal = require("@sap/cf-tools/out/src/cf-local");
/**
 * Check if the external login is enabled.
 *
 * @param {any} vscode - The vscode instance.
 * @returns {Promise<boolean>} Whether the external login is enabled.
 */
async function isExternalLoginEnabled(vscode) {
    const commands = await vscode.commands.getCommands();
    return commands?.includes('cf.login');
}
/**
 * Check if the user is logged in Cloud Foundry.
 *
 * @param {CfConfig} cfConfig - The CF config.
 * @param {ToolsLogger} logger - The logger.
 * @returns {Promise<boolean>} Whether the user is logged in.
 */
async function isLoggedInCf(cfConfig, logger) {
    if (!cfConfig) {
        logger?.error('CF config is not provided');
        return false;
    }
    try {
        const orgs = (await CFLocal.cfGetAvailableOrgs());
        logger?.log(`Available organizations: ${JSON.stringify(orgs)}`);
        return true;
    }
    catch (e) {
        logger?.error(`Error occurred while trying to check if it is logged in: ${e?.message}`);
    }
    return false;
}
//# sourceMappingURL=auth.js.map